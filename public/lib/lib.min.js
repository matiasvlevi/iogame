class Logger{}Logger.server=function(e){console.log(`[Server]: ${e}`)},globalThis.isBrowser="object"!=typeof process,isBrowser||(globalThis.Player=require("../player/player.js"));class World{constructor(){this.players={},this.tick=0,this.skins={default:[255,255,255]}}playerJoin(e="username"){socket.emit("playerJoin",e)}addPlayer(e,s){if("string"==typeof e){let r=new Player(e,s);return r.setPos(500*Math.random(),500*Math.random()),this.players[s]=r,r}if("object"==typeof e){let s=new Player;return s=World.fromObject(s,e),this.players[e.sid]=s,s}}removePlayer(e){delete this.players[e]}static fromObject(e,s){let r=Object.keys(e),t=Object.values(s);for(let s=0;s<r.length;s++)e[r[s]]=t[s];return e}toObject(){let e=Object.keys(this),s=Object.values(this),r={};for(let t=0;t<e.length;t++)r[e[t]]=s[t];return r}render(e){let s=Object.values(this.players);for(let r=0;r<s.length;r++)s[r].render(e.sid)}}let world,player;isBrowser||(module.exports=new World),globalThis.isBrowser="object"!=typeof process,isBrowser?void 0===world&&(world=new World):world=require("../env/world.js");class Player{constructor(e,s,r=0,t=0){this.pos={x:r,y:t},this.vel={x:0,y:0},this.size=16,this.self=!1,this.username=e,this.sid=s,this.skin="default"}toObject(){let e=Object.keys(this),s=Object.values(this),r={};for(let t=0;t<e.length;t++)r[e[t]]=s[t];return r}setPos(e,s){this.pos={x:e,y:s}}render(e){this.sid===e&&(fill(100,100,100,100),ellipse(this.pos.x,this.pos.y,64,64)),noStroke(),fill.apply(1,world.skins[this.skin]),ellipse(this.pos.x,this.pos.y,this.size,this.size),text(this.username,this.pos.x+this.size,this.pos.y+this.size)}}isBrowser||(module.exports=Player),isBrowser&&(socket.on("newPlayer",(e=>{world.addPlayer(e),Logger.server(`${e.username} joined the game!`)})),socket.on("removePlayer",(e=>{delete world.players[e],Logger.server(`player ${e} left the game`)})),socket.on("selfPlayer",(e=>{player=World.fromObject(new Player,e)})));let wnx=window.innerWidth,wny=window.innerHeight;function setup(){wnx=window.innerWidth,wny=window.innerHeight,createCanvas(wnx,wny),world.playerJoin(prompt("Nickname:"))}function draw(){background(51),world.render(player)}